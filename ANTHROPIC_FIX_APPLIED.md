# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Anthropic API - –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞**: `anthropic API Error: Error: Server error: Internal server error (500)`

**–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –º–æ–¥–µ–ª—å `claude-3-sonnet-20240229`, –∫–æ—Ç–æ—Ä–∞—è:

- Deprecated —Å –º–∞—Ä—Ç–∞ 2024
- –ë—É–¥–µ—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–µ–Ω–∞ 21 –∏—é–ª—è 2025
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 500 –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üõ†Ô∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

üìÅ `src/config/aiProviders.ts`

```diff
anthropic: {
  name: 'Anthropic',
- model: 'claude-3-sonnet-20240229', // ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∞—è
+ model: 'claude-3-5-sonnet-20241022', // ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è
  apiKey: 'backend-only',
  temperature: 0.7,
  maxTokens: 2000,
  // ...
}
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**

üìÅ `src/components/MessageBubble.tsx`

```diff
- case 'claude-3-sonnet-20240229':
+ case 'claude-3-5-sonnet-20241022':
    return 'üß†';
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–µ–π**

üìÅ `supabase/functions/api-keys-check/index.ts`

```diff
- model: 'claude-3-sonnet-20240229',
+ model: 'claude-3-5-sonnet-20241022',
```

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã**

- `test-claude-debug.js` ‚úÖ
- `tests/functional-api-test.js` ‚úÖ
- `tests/edge-functions-test.js` ‚úÖ
- `tests/api-comprehensive-test.ts` ‚úÖ

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Claude 3.5 Sonnet

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏:**

- **Context Window**: 200,000 —Ç–æ–∫–µ–Ω–æ–≤
- **Max Output**: 8,192 —Ç–æ–∫–µ–Ω–∞
- **–¶–µ–Ω–∞**: $3.00/1M input, $15.00/1M output
- **API Version**: 2023-06-01

**–£–ª—É—á—à–µ–Ω–∏—è:**

- ‚úÖ –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Computer Use (–±–µ—Ç–∞)
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–ª–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

## üîß –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### 1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

```bash
npm run dev
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –≤ Supabase** (–µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã
npx supabase secrets list

# –û–±–Ω–æ–≤–∏—Ç—å API –∫–ª—é—á –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
npx supabase secrets set ANTHROPIC_API_KEY="sk-ant-..."
```

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã –Ω–∞ Anthropic**

–ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://console.anthropic.com/dashboard –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (Credits)
- –ù–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ API
- API –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```
‚ùå anthropic API Error Details: {status: 500, statusText: '', errorData: {error: 'Internal server error'}}
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```
‚úÖ Anthropic API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–æ–¥–µ–ª—å—é claude-3-5-sonnet-20241022
‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ API
- –°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –î–µ—Ç–∞–ª–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –¢–µ–ø–µ—Ä—å –≤—Å–µ –æ—à–∏–±–∫–∏ –±—É–¥—É—Ç –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫ –≤ ai-proxy —Ñ—É–Ω–∫—Ü–∏–∏.

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ**  
**–î–∞—Ç–∞**: ${new Date().toLocaleDateString('ru-RU')}  
**–í–µ—Ä—Å–∏—è**: Claude 3.5 Sonnet (Oct 2024)
